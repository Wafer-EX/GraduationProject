@page "/admin"
@using CoderWebsite.Components
@using CoderWebsite.Components.Admin.Panel

<PageBlock>
    <div class="admin-panel-title-container">
        <span class="admin-panel-title">Панель администратора</span>
        <span class="admin-panel-title-mail">pochta@mail.ru</span>
    </div>
    <div class="admin-panel-tabs-container">
        <button class="admin-panel-tab @(GetStyle(AdminPanelSelection.NewsControl))"
            @onclick="() => ChangeSelection(AdminPanelSelection.NewsControl)">
            Управление новостями
        </button>
        <button class="admin-panel-tab @(GetStyle(AdminPanelSelection.UserList))"
            @onclick="() => ChangeSelection(AdminPanelSelection.UserList)">
            Список пользователей
        </button>
    </div>
    <div>
        <div style="@(GetDisplay(AdminPanelSelection.NewsControl))">
            <NewsManager />
        </div>
        <div style="@(GetDisplay(AdminPanelSelection.UserList))">
            <UserManager />
        </div>
    </div>
</PageBlock>

@code {
    private AdminPanelSelection tabSelection = AdminPanelSelection.NewsControl;

    private void ChangeSelection(AdminPanelSelection selection)
    {
        tabSelection = selection;
        StateHasChanged();
    }

    private string GetStyle(AdminPanelSelection selection)
    {
        if (selection == tabSelection) return "admin-panel-tab-selected";
        else return "";
    }

    private string GetDisplay(AdminPanelSelection selection)
    {
        if (selection != tabSelection) return "display: none;";
        else return "";
    }

    private enum AdminPanelSelection
    {
        NewsControl,
        UserList
    }
}