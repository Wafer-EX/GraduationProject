@page "/news-list"

@using CoderWebsite.Components
@using CoderWebsite.Components.BlockContent.NewsList
@using CoderWebsite.Models

@inject ApplicationContext DbContext

<PageTitle>Новости | Кодер</PageTitle>

<PageBlock>
    <div class="news-list-container">
        <div class="news-list-title">Новости</div>
        <div class="news-list-elements-container">
            @if (allNews != null && allNews.Count > 0)
            {
                @for (int i = 0; i < allNews.Count; i++)
                {
                    <NewsListElement Style="@($"animation-delay: .{i}s")"
                        Id="@(allNews[i].Id)"
                        Date="@(allNews[i].Date)"
                        Title="@(allNews[i].Title)"
                        Text="@(allNews[i].Text)"/>
                }
            }
            else
            {
                <div class="news-list-no-news-text">На данный момент новостей нет.</div>
            }
        </div>
    </div>
</PageBlock>

@code {
    private List<News>? allNews;

    [Parameter] public int Id { get; set; }

    protected override void OnInitialized()
    {
        allNews = DbContext.News.ToList();
    }
}